import{S as ae,i as re,s as oe,e as n,t as k,c as u,a as f,h as O,d as i,b as a,g as z,G as e,k as N,m as T,H as C,j as ie,$ as X,aa as ne,I as ee,X as ue,M as de,ab as ce}from"./vendor-687c3837.js";import{b as fe}from"./env-6d58f0dd.js";import{g as pe}from"./navigation-0e6511d1.js";import{i as te}from"./store-6cd925d3.js";function se(p){let t,s;return{c(){t=n("div"),s=k("Loading...."),this.h()},l(r){t=u(r,"DIV",{class:!0});var o=f(t);s=O(o,"Loading...."),o.forEach(i),this.h()},h(){a(t,"class","my-8 h-100 text-4xl w-full text-orange-700 text-center")},m(r,o){z(r,t,o),e(t,s)},d(r){r&&i(t)}}}function le(p){let t,s,r,o,d,c,x,v,h,w,I;return{c(){t=n("div"),s=n("div"),r=n("span"),o=k(p[2]),d=N(),c=n("button"),x=k("X"),v=N(),h=n("div"),this.h()},l(_){t=u(_,"DIV",{class:!0});var L=f(t);s=u(L,"DIV",{class:!0});var l=f(s);r=u(l,"SPAN",{});var S=f(r);o=O(S,p[2]),S.forEach(i),d=T(l),c=u(l,"BUTTON",{class:!0});var E=f(c);x=O(E,"X"),E.forEach(i),v=T(l),h=u(l,"DIV",{class:!0}),f(h).forEach(i),l.forEach(i),L.forEach(i),this.h()},h(){a(c,"class","rounded-full float-right bg-gray-100 text-gray-800 px-2 hover:bg-gray-200"),a(h,"class","clear-right"),a(s,"class","my-8 w-full h-100 text-xl p-2 bg-orange-500 text-white text-center"),a(t,"class","flex w-full")},m(_,L){z(_,t,L),e(t,s),e(s,r),e(r,o),e(s,d),e(s,c),e(c,x),e(s,v),e(s,h),w||(I=C(c,"click",p[4]),w=!0)},p(_,L){L&4&&ie(o,_[2])},d(_){_&&i(t),w=!1,I()}}}function he(p){let t,s,r,o,d,c,x,v,h,w,I,_,L,l,S,E,y,H,M,D,F,P,j,G,R,K,b=p[1]&&se(),m=p[2]&&le(p);return{c(){t=n("div"),b&&b.c(),s=N(),m&&m.c(),r=N(),o=n("div"),d=n("h1"),c=k("Login"),x=N(),v=n("form"),h=n("div"),w=n("div"),I=n("label"),_=k("Email"),L=N(),l=n("input"),S=N(),E=n("div"),y=n("label"),H=k("Password"),M=N(),D=n("input"),F=N(),P=n("div"),j=n("button"),G=k("Login"),this.h()},l(g){t=u(g,"DIV",{});var V=f(t);b&&b.l(V),s=T(V),m&&m.l(V),r=T(V),o=u(V,"DIV",{class:!0});var A=f(o);d=u(A,"H1",{class:!0});var Q=f(d);c=O(Q,"Login"),Q.forEach(i),x=T(A),v=u(A,"FORM",{class:!0});var U=f(v);h=u(U,"DIV",{class:!0});var B=f(h);w=u(B,"DIV",{});var q=f(w);I=u(q,"LABEL",{class:!0,for:!0});var W=f(I);_=O(W,"Email"),W.forEach(i),L=T(q),l=u(q,"INPUT",{name:!0,class:!0,type:!0,id:!0}),q.forEach(i),S=T(B),E=u(B,"DIV",{});var J=f(E);y=u(J,"LABEL",{class:!0,for:!0});var Y=f(y);H=O(Y,"Password"),Y.forEach(i),M=T(J),D=u(J,"INPUT",{name:!0,class:!0,type:!0,id:!0}),J.forEach(i),B.forEach(i),F=T(U),P=u(U,"DIV",{class:!0});var Z=f(P);j=u(Z,"BUTTON",{class:!0});var $=f(j);G=O($,"Login"),$.forEach(i),Z.forEach(i),U.forEach(i),A.forEach(i),V.forEach(i),this.h()},h(){a(d,"class","bg-blue-800 text-white font-bold w-full p-2 text-2xl text-center rounded"),a(I,"class","font-bold text-blue-800"),a(I,"for","email"),a(l,"name","email"),a(l,"class","w-full mt-2"),a(l,"type","email"),a(l,"id","email"),l.required=!0,a(y,"class","font-bold text-blue-800"),a(y,"for","password"),a(D,"name","password"),a(D,"class","w-full mt-2"),a(D,"type","password"),a(D,"id","password"),D.required=!0,a(h,"class","flex my-2 gap-4 flex-col justify-items-start text-xl font-bold"),a(j,"class","bg-green-500 text-white py-2 px-4 hover:bg-green-400 w-2/4 rounded"),a(P,"class","px-2 py-2 w-full text-center"),a(v,"class","grid p-2"),a(o,"class","mt-4 w-full md:w-2/5 mx-auto border rounded p-4")},m(g,V){z(g,t,V),b&&b.m(t,null),e(t,s),m&&m.m(t,null),e(t,r),e(t,o),e(o,d),e(d,c),e(o,x),e(o,v),e(v,h),e(h,w),e(w,I),e(I,_),e(w,L),e(w,l),X(l,p[0].email),e(h,S),e(h,E),e(E,y),e(y,H),e(E,M),e(E,D),X(D,p[0].password),e(v,F),e(v,P),e(P,j),e(j,G),R||(K=[C(l,"input",p[5]),C(D,"input",p[6]),C(v,"submit",ne(p[3]))],R=!0)},p(g,[V]){g[1]?b||(b=se(),b.c(),b.m(t,s)):b&&(b.d(1),b=null),g[2]?m?m.p(g,V):(m=le(g),m.c(),m.m(t,r)):m&&(m.d(1),m=null),V&1&&l.value!==g[0].email&&X(l,g[0].email),V&1&&D.value!==g[0].password&&X(D,g[0].password)},i:ee,o:ee,d(g){g&&i(t),b&&b.d(),m&&m.d(),R=!1,ue(K)}}}function me(p,t,s){let r;de(p,te,_=>s(7,r=_));const o="http://103.85.229.82:4400/dbapi";let d={},c=!1,x=null;const v=async _=>{const L=`${o}/user/login`;try{s(1,c=!0);const l={method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)},S=await fetch(L,l);if(console.log(S.status),S.status!=200){const y=await S.json();console.log(y),s(2,x=y.error),s(1,c=!1);return}const E=await S.json();if(E){if(localStorage.setItem("userdetail",JSON.stringify(E)),fe){const y=JSON.parse(localStorage.getItem("userdetail"));ce(te,r=y||null,r)}pe("/")}s(1,c=!1)}catch(l){console.log("****",l),s(2,x=l.error),s(1,c=!1)}},h=_=>s(2,x=null);function w(){d.email=this.value,s(0,d)}function I(){d.password=this.value,s(0,d)}return[d,c,x,v,h,w,I]}class we extends ae{constructor(t){super();re(this,t,me,he,oe,{})}}export{we as L};
