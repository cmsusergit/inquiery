import{S as ae,i as ie,s as re,e as w,t as F,c as E,a as j,h as N,d as g,b as _,g as Q,G as r,k as A,m as H,H as M,j as K,$,X as ne,I as x,P as ce,M as ee,v as ue}from"../../chunks/vendor-687c3837.js";import{b as fe}from"../../chunks/env-6d58f0dd.js";import{g as X}from"../../chunks/navigation-0e6511d1.js";import{p as de}from"../../chunks/stores-39e70469.js";import{i as he,s as G}from"../../chunks/store-6cd925d3.js";import"../../chunks/singletons-d1fb5791.js";function te(t,e,o){const s=t.slice();return s[16]=e[o],s[17]=e,s[18]=o,s}function se(t){let e,o,s;return{c(){e=w("div"),o=w("p"),s=F("Loading...."),this.h()},l(c){e=E(c,"DIV",{class:!0});var n=j(e);o=E(n,"P",{class:!0});var u=j(o);s=N(u,"Loading...."),u.forEach(g),n.forEach(g),this.h()},h(){_(o,"class","relative top-1/2"),_(e,"class","absolute left-0 top-1/2 w-full h-48 bg-blue-500 text-white z-10 text-4xl opacity-50 text-center")},m(c,n){Q(c,e,n),r(e,o),r(o,s)},d(c){c&&g(e)}}}function oe(t){let e,o,s;function c(){t[9].call(e,t[17],t[18])}return{c(){e=w("input"),this.h()},l(n){e=E(n,"INPUT",{type:!0}),this.h()},h(){_(e,"type","text")},m(n,u){Q(n,e,u),$(e,t[16].comment),o||(s=M(e,"input",c),o=!0)},p(n,u){t=n,u&1&&e.value!==t[16].comment&&$(e,t[16].comment)},d(n){n&&g(e),o=!1,s()}}}function le(t){let e,o,s,c,n,u,d,S=t[16].faq+"",v,I,D,O,P;function T(){t[7].call(s,t[17],t[18])}function V(...p){return t[8](t[16],...p)}let i=t[16].selected&&t[16].selected==!0&&oe(t);return{c(){e=w("div"),o=w("div"),s=w("input"),u=A(),d=w("label"),v=F(S),D=A(),i&&i.c(),this.h()},l(p){e=E(p,"DIV",{class:!0});var b=j(e);o=E(b,"DIV",{});var l=j(o);s=E(l,"INPUT",{type:!0,id:!0}),u=H(l),d=E(l,"LABEL",{class:!0,for:!0});var a=j(d);v=N(a,S),a.forEach(g),l.forEach(g),D=H(b),i&&i.l(b),b.forEach(g),this.h()},h(){s.__value=c=t[16].faq,s.value=s.__value,_(s,"type","checkbox"),_(s,"id",n=t[16].faq),_(d,"class","ml-2"),_(d,"for",I=t[16].faq),_(e,"class","flex flex-col p-1 border-b gap-2")},m(p,b){Q(p,e,b),r(e,o),r(o,s),s.checked=t[16].selected,r(o,u),r(o,d),r(d,v),r(e,D),i&&i.m(e,null),O||(P=[M(s,"change",T),M(s,"input",V)],O=!0)},p(p,b){t=p,b&1&&c!==(c=t[16].faq)&&(s.__value=c,s.value=s.__value),b&1&&n!==(n=t[16].faq)&&_(s,"id",n),b&1&&(s.checked=t[16].selected),b&1&&S!==(S=t[16].faq+"")&&K(v,S),b&1&&I!==(I=t[16].faq)&&_(d,"for",I),t[16].selected&&t[16].selected==!0?i?i.p(t,b):(i=oe(t),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(p){p&&g(e),i&&i.d(),O=!1,ne(P)}}}function me(t){let e,o,s,c,n,u,d,S,v,I=t[3].params.id+"",D,O,P,T,V,i,p,b,l,a,q,L,U,f=t[2]&&se(),k=t[0],y=[];for(let h=0;h<k.length;h+=1)y[h]=le(te(t,k,h));return{c(){e=w("div"),f&&f.c(),o=A(),s=w("div"),c=w("h1"),n=F("Comment/Discussion"),u=A(),d=w("h1"),S=F(t[1]),v=F("("),D=F(I),O=F(")"),P=A(),T=w("form");for(let h=0;h<y.length;h+=1)y[h].c();V=A(),i=w("div"),p=w("button"),b=F("Submit"),l=A(),a=w("button"),q=F("Submit & Close Inquiry"),this.h()},l(h){e=E(h,"DIV",{class:!0});var C=j(e);f&&f.l(C),o=H(C),s=E(C,"DIV",{class:!0});var m=j(s);c=E(m,"H1",{class:!0});var B=j(c);n=N(B,"Comment/Discussion"),B.forEach(g),u=H(m),d=E(m,"H1",{class:!0});var J=j(d);S=N(J,t[1]),v=N(J,"("),D=N(J,I),O=N(J,")"),J.forEach(g),m.forEach(g),P=H(C),T=E(C,"FORM",{class:!0});var R=j(T);for(let W=0;W<y.length;W+=1)y[W].l(R);V=H(R),i=E(R,"DIV",{class:!0});var z=j(i);p=E(z,"BUTTON",{class:!0,type:!0});var Y=j(p);b=N(Y,"Submit"),Y.forEach(g),l=H(z),a=E(z,"BUTTON",{class:!0,type:!0});var Z=j(a);q=N(Z,"Submit & Close Inquiry"),Z.forEach(g),z.forEach(g),R.forEach(g),C.forEach(g),this.h()},h(){_(c,"class",""),_(d,"class",""),_(s,"class","bg-sky-400 text-white w-full text-2xl mt-2 px-2 py-1 flex justify-between rounded"),_(p,"class","mt-2 w-52 bg-green-400 text-white px-2 py-1 hover:bg-green-500 rounded"),_(p,"type","button"),_(a,"class","mt-2 w-52 bg-amber-400 text-white px-2 py-1 hover:bg-amber-500 rounded"),_(a,"type","button"),_(i,"class","mt-2 p-2 flex gap-2 justify-end"),_(T,"class","mt-2 p-2"),_(e,"class","container")},m(h,C){Q(h,e,C),f&&f.m(e,null),r(e,o),r(e,s),r(s,c),r(c,n),r(s,u),r(s,d),r(d,S),r(d,v),r(d,D),r(d,O),r(e,P),r(e,T);for(let m=0;m<y.length;m+=1)y[m].m(T,null);r(T,V),r(T,i),r(i,p),r(p,b),r(i,l),r(i,a),r(a,q),L||(U=[M(p,"click",t[5]),M(a,"click",t[6])],L=!0)},p(h,[C]){if(h[2]?f||(f=se(),f.c(),f.m(e,o)):f&&(f.d(1),f=null),C&2&&K(S,h[1]),C&8&&I!==(I=h[3].params.id+"")&&K(D,I),C&17){k=h[0];let m;for(m=0;m<k.length;m+=1){const B=te(h,k,m);y[m]?y[m].p(B,C):(y[m]=le(B),y[m].c(),y[m].m(T,V))}for(;m<y.length;m+=1)y[m].d(1);y.length=k.length}},i:x,o:x,d(h){h&&g(e),f&&f.d(),ce(y,h),L=!1,ne(U)}}}function pe(t,e,o){let s,c;ee(t,de,l=>o(3,s=l)),ee(t,he,l=>o(10,c=l));const n="http://103.85.229.82:4400/dbapi";let u=[],d="";const S=(l,a)=>{const q=u.findIndex(L=>L.faq==a.value);q!=-1&&(o(0,u[q].selected=a.checked,u),u[q].selected||o(0,u[q].comment="",u))};let v=!1;const I=async()=>{const l={method:"DELETE",mode:"cors",headers:{"Content-Type":"application/json"}},q=await(await fetch(`${n}/inquery/${s.params.id}/comment/${c.id}`,G(l))).json();console.log(q)},D=async()=>{o(2,v=!0);try{const l={f_user_id:c.id},a={method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)};await fetch(`${n}/inquery/${s.params.id}/branchhandled/`,G(a));const q=[];u.forEach(k=>{k.selected&&k.selected==!0&&q.push({f_inquiry_id:s.params.id,f_inquiryhandled_id:c.id,f_faq_id:k.id,remarks:k.comment})});const L={method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)},f=await(await fetch(`${n}/inquery/comment`,G(L))).json();console.log("****",f),o(2,v=!1),fe&&alert("Submitted Successfully"),X("/admin")}catch(l){console.log(l),o(2,v=!1)}},O=async()=>{try{const a=await(await fetch(`${n}/inquery/${s.params.id}/comment/${c.id}`)).json(),q=`${n}/inquery/inquiryfaq`;let L=null;const U=await fetch(q);U.status==200&&(L=await U.json(),L.forEach(f=>{let k=!1;a.forEach(y=>{y.f_faq_id==f.id&&(f.selected=!0,f.comment=y.remarks,k=!0)}),k||(f.selected=!1,f.comment="")})),o(0,u=L)}catch(l){console.log("****",l)}},P=l=>{I(),D(),X("/admin")},T=async()=>{o(2,v=!0);try{const l={is_closed:1,f_closed_by:c.id},a={method:"PATCH",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)};await fetch(`${n}/inquery/${s.params.id}`,G(a)),o(2,v=!1)}catch(l){console.log(l),o(2,v=!1)}},V=l=>{I(),D(),T(),X("/admin")};ue(async()=>{try{const a=await(await fetch(`${n}/inquery/${s.params.id}`)).json();o(1,d=a[0].name),O()}catch(l){console.log(l)}});function i(l,a){l[a].selected=this.checked,o(0,u)}const p=(l,a)=>S(l,a.target);function b(l,a){l[a].comment=this.value,o(0,u)}return[u,d,v,s,S,P,V,i,p,b]}class we extends ae{constructor(e){super();ie(this,e,pe,me,re,{})}}export{we as default};
